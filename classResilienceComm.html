<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ls1-MarDyn: ResilienceComm Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ls1-MarDyn
   </div>
   <div id="projectbrief">ls1-MarDyn molecular dynamics code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classResilienceComm-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ResilienceComm Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a24d560bb3cab6da48b1712c499d263d5"><td class="memItemLeft" align="right" valign="top"><a id="a24d560bb3cab6da48b1712c499d263d5" name="a24d560bb3cab6da48b1712c499d263d5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ResilienceComm</b> (int numProcs, int rank)</td></tr>
<tr class="separator:a24d560bb3cab6da48b1712c499d263d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b640046216e4180e8c67700a7990d9f"><td class="memItemLeft" align="right" valign="top"><a id="a4b640046216e4180e8c67700a7990d9f" name="a4b640046216e4180e8c67700a7990d9f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ResilienceComm</b> (<a class="el" href="classResilienceComm.html">ResilienceComm</a> const &amp;rc)</td></tr>
<tr class="separator:a4b640046216e4180e8c67700a7990d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d56ad81a85582f55bcb1152b3237143"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResilienceComm.html#a5d56ad81a85582f55bcb1152b3237143">scatterBackupInfo</a> (std::vector&lt; int &gt; &amp;backupInfo, int const numberOfBackups, size_t const sizePerRank, std::vector&lt; int &gt; &amp;backing, std::vector&lt; int &gt; &amp;backedBy, std::vector&lt; int &gt; &amp;backingTags, std::vector&lt; int &gt; &amp;backedByTags)</td></tr>
<tr class="separator:a5d56ad81a85582f55bcb1152b3237143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdef8035a7144f632956e8445e0cec7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResilienceComm.html#abbdef8035a7144f632956e8445e0cec7">exchangeSnapshotSizes</a> (std::vector&lt; int &gt; &amp;backing, std::vector&lt; int &gt; &amp;backedBy, std::vector&lt; int &gt; &amp;backingTags, std::vector&lt; int &gt; &amp;backedByTags, size_t const snapshotSize, std::vector&lt; int &gt; &amp;backupDataSizes)</td></tr>
<tr class="separator:abbdef8035a7144f632956e8445e0cec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa49f7786f0283c0cd59ef00ebdcc8bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classResilienceComm.html#afa49f7786f0283c0cd59ef00ebdcc8bd">exchangeSnapshots</a> (std::vector&lt; int &gt; &amp;backing, std::vector&lt; int &gt; &amp;backedBy, std::vector&lt; int &gt; &amp;backingTags, std::vector&lt; int &gt; &amp;backedByTags, std::vector&lt; int &gt; &amp;backupDataSizes, std::vector&lt; char &gt; &amp;sendData, std::vector&lt; char &gt; &amp;recvData)</td></tr>
<tr class="separator:afa49f7786f0283c0cd59ef00ebdcc8bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afa49f7786f0283c0cd59ef00ebdcc8bd" name="afa49f7786f0283c0cd59ef00ebdcc8bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa49f7786f0283c0cd59ef00ebdcc8bd">&#9670;&nbsp;</a></span>exchangeSnapshots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ResilienceComm::exchangeSnapshots </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backedBy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backingTags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backedByTags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backupDataSizes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; char &gt; &amp;&#160;</td>
          <td class="paramname"><em>sendData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; char &gt; &amp;&#160;</td>
          <td class="paramname"><em>recvData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Send snapshot meta data from caller to ranks backing it. Called by each process after trading the backup snapshot sizes. This will perform the actual sending of snapshot data for each of the backup ranks. Updates request buffer _exchangeSnapshotRequests. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">backing</td><td>A list of ranks being backed by the current rank </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backedBy</td><td>A list of ranks the current rank is backing up </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backingTags</td><td>The tags associated with the communication of the ranks in backing (used in recv) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backedByTags</td><td>The tags associated with the communication of the ranks in backedBy (used in send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backupDataSizes</td><td>The individual sizes of the snapshots acquired </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sendData</td><td>The local snapshot data as char vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">recvData</td><td>The complete snapshot datas of the ranks being backed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abbdef8035a7144f632956e8445e0cec7" name="abbdef8035a7144f632956e8445e0cec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdef8035a7144f632956e8445e0cec7">&#9670;&nbsp;</a></span>exchangeSnapshotSizes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ResilienceComm::exchangeSnapshotSizes </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backedBy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backingTags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backedByTags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t const&#160;</td>
          <td class="paramname"><em>snapshotSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backupDataSizes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Send snapshot size from caller to ranks backing it. Called by each process after setting up the new snapshot. Needs to be called before calling RedundancyResilience::exchangeSnapshots. If this was done already should probably be checked in that method. But it isn't. Updates request buffer _exchangeSizesRequests. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">backing</td><td>A list of ranks being backed by the current rank </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backedBy</td><td>A list of ranks the current rank is backing up </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backingTags</td><td>The tags associated with the communication of the ranks in backing (used in recv) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">backedByTags</td><td>The tags associated with the communication of the ranks in backedBy (used in send) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">snapshotSize</td><td>Size of the local snapshot data in bytes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backupDataSizes</td><td>The individual sizes of the snapshots acquired </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5d56ad81a85582f55bcb1152b3237143" name="a5d56ad81a85582f55bcb1152b3237143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d56ad81a85582f55bcb1152b3237143">&#9670;&nbsp;</a></span>scatterBackupInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ResilienceComm::scatterBackupInfo </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backupInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int const&#160;</td>
          <td class="paramname"><em>numberOfBackups</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t const&#160;</td>
          <td class="paramname"><em>sizePerRank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backing</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backedBy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backingTags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>backedByTags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Scatters which rank is backing which and the inverse, i.e. which rank is being backed by which. Scatters info about which rank should backup which. This data is only produced on the root node, and needs to be scattered. The method assumes that: #ranks being backed by current rank = #ranks backing current rank = numberOfBackups The method modifies the request buffers (RedundancyComm::_exchangeSizesRequests and RedundancyComm::_exchangeSnapshotRequests) The tags are used to identify the messages in send/recv calls. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">backupInfo</td><td>Contains the rank configuration. Set up in RedundancyResilience::_determineBackups, check there for layout. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numberOfBackups</td><td>how many backups are made per rank </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sizePerRank</td><td>Number of information elements per rank (numberOfBackups*number of arrays, atm 4) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backing</td><td>A list of ranks being backed by the current rank </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backedBy</td><td>A list of ranks backing the current rank </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backingTags</td><td>The tags associated with the communication of the ranks in backing (used in recv) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">backedByTags</td><td>The tags associated with the communication of the ranks in backedBy (used in send) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/parallel/<a class="el" href="ResilienceComm_8h_source.html">ResilienceComm.h</a></li>
<li>src/parallel/ResilienceComm.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 2 2023 13:14:50 for ls1-MarDyn by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
