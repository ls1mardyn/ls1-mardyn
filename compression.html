<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ls1-MarDyn: Compression algorithm wrapper</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ls1-MarDyn
   </div>
   <div id="projectbrief">ls1-MarDyn molecular dynamics code</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="classCompression.html" title="The Compression class provides easy to use compression methods.">Compression</a> algorithm wrapper </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This wrapper provides some convenience when you want to use some sort of compression somewhere in the project. The syntax is simple and LZ4 is already included as one compression algorithm.<br  />
To use the functionality, turn on the option <code>ENABLE_COMPRESSION</code> in the CMake options. New options to turn on individual encoding algorithms will be available.<br  />
LZ4 is used by default when the wrapper was enabled.<br  />
In the code, instantiate a <code><a class="el" href="classCompression.html" title="The Compression class provides easy to use compression methods.">Compression</a></code> object, passing the requested compression algorithm as a std::string tag (see <a class="el" href="compression.html#tags">tags</a> below), which will offer the necessary functionality. Consider the following snippet: </p><pre class="fragment">#include &lt;iostream&gt;             // for std::cout 
#include &lt;memory&gt;               // for std::unique_ptr
#include "compression.h"        // compression stuff

std::vector&lt;char&gt; data;         //your data
std::vector&lt;char&gt; compressed;   //object to store the compressed result
std::vector&lt;char&gt; decompressed; //object to store the decompressed result

std::unique_ptr&lt;Compression&gt; compression_instance;
try {
    compression_instance = Compression::create("LZ4");
}
catch (std::invalid_argument ia) {
    std::cout &lt;&lt; ia.what() &lt;&lt; std::endl;
}

compression_instance.compress(data.begin(), data.end(), compressed); //run compression algorithm
</pre><p> The encoded data is now stored in <code>compressed</code>. The first size_t bytes (actually decltype(_uncompressedSize), see <a class="el" href="classCompression.html" title="The Compression class provides easy to use compression methods.">Compression</a> class) contain the uncompressed size.<br  />
If the instance creation fails, create() will throw a std::invalid_argument (strong guarantee). The string in the error message is the string the factory received to select an encoding, which should be one of the tags in <a class="el" href="compression.html#tags">tags</a>. If the compression fails, compress() will throw a std::exception. The error code from the message can be looked up in the errors of the documentation matching the encoding, i.e. it will show the error code returned by the library function. E.g. for lz4, you would need to go the lz4 github page and read the appropriate docs.</p>
<p >Decompression works similarly: </p><pre class="fragment">compression_instance.decompress(compressed.begin(), compressed.end(), decompressed);
</pre><p> Decompressed now contains exactly the same values as <code>data</code>.<br  />
The decompression will throw on failure. The error code provided is again library specific. The compress and decompress methods for "LZ4" and "None" tags provide strong guarantee.</p>
<p >If you are having issues with any library, try using "None" as encoding tag. This will only do a copy, and therefore is less error prone.</p>
<a class="anchor" id="tags"></a>
<table class="doxtable">
<caption>Algorithm Tags</caption>
<tr>
<th>Tag </th><th>Algorithm </th></tr>
<tr>
<th>None </th><th>No compression </th></tr>
<tr>
<th>LZ4 </th><th>lz4 lz4.github.io/lz4/ </th></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 26 2024 22:11:31 for ls1-MarDyn by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
